-- ============================================================
-- ROBLOX BRAINROT TRACKER + INFINITE PERSISTENT HOP (ULTRA FAST)
-- ============================================================

-- Webhook URLs for different value ranges
local WEBHOOKS = {
    ["10M"] = "https://ptb.discord.com/api/webhooks/1466150960631124077/uSYu5q9WRgbVGc--fYMh8v8oKv8px-6fKsshPhXUPRuejrXRX3fBUnAVenmv792iAdLw",
    ["50M"] = "https://ptb.discord.com/api/webhooks/1466151003249446953/ptYOg2FccEIbO45D7jEtxV0DLSTUjsZ7Wk_P_jcANpgMq14qKJfspx1RpdCGgh_Jom23",
    ["100M"] = "https://ptb.discord.com/api/webhooks/1466151038016028793/9Af0juhrAtmIMPt2JcfPy2Yjqd01VemE6-Il8NH3--0XDICoW17BLz7VOWYZ9XKWj_-f",
    ["500M"] = "https://ptb.discord.com/api/webhooks/1466151077438033962/2id4dQig9N_7FK-X9rtNGNYRWjv_PXMGSiIwN-lQ36AAqGDYlrB8u_A_k7R2qGWPH04a",
    ["1B"] = "https://ptb.discord.com/api/webhooks/1466151123944472597/CtZbm3U3Lsi1TGdOfLPqGdziF_0xpZ-cWMqXupUeE3-YEF-BcpJufH5PUBFFlSborgzM"
}

local HIGHLIGHT_WEBHOOK = "https://ptb.discord.com/api/webhooks/1466088189260468458/Vi19cPhLJXGckt_0IDjRa6MkGixFznByJ_0BlNmKx0h84VlBgJtrPmtHWmbDHiW3eOPe"
local MIN_VAL = 10000000
local HIGHLIGHT_THRESHOLD = 100000000

local IMG = {
    ["los mobilis"] = "https://static.wikia.nocookie.net/stealabr/images/2/27/Losmobil.png",
    ["los combinasionas"] = "https://static.wikia.nocookie.net/stealabr/images/3/38/Los_Combinasion.webp",
    ["mieteteira bicicleteira"] = "https://static.wikia.nocookie.net/stealabr/images/6/6d/24_sin_t%C3%ADtulo_20251023155436.png",
    ["spaghetti tualetti"] = "https://static.wikia.nocookie.net/stealabr/images/b/b8/Spaghettitualetti.png",
    ["esok sekolah"] = "https://static.wikia.nocookie.net/stealabr/images/2/2a/EsokSekolah2.png",
    ["la casa boo"] = "https://static.wikia.nocookie.net/stealabr/images/d/de/Casa_Booo.png",
    ["eviledon"] = "https://static.wikia.nocookie.net/stealabr/images/7/78/Eviledonn.png",
    ["la grande combinasion"] = "https://static.wikia.nocookie.net/stealabr/images/9/9a/Playboi_carti.png",
    ["chipso and queso"] = "https://static.wikia.nocookie.net/stealabr/images/f/f8/Chipsoqueso.png",
    ["ketchuru and musturu"] = "https://static.wikia.nocookie.net/stealabr/images/1/14/Ketchuru.png",
    ["la secret combinasion"] = "https://static.wikia.nocookie.net/stealabr/images/f/f2/Lasecretcombinasion.png",
    ["los 67"] = "https://images-ext-1.discordapp.net/external/J2ziR07sTWg41X2im54WPH64QEmBVx6l2dOFPf_BLSk/https/static.wikia.nocookie.net/stealabr/images/d/db/Los-67.png",
    ["dragon cannelloni"] = "https://static.wikia.nocookie.net/stealabr/images/0/02/Dragoncanneloni.png",
    ["la taco combinasion"] = "https://static.wikia.nocookie.net/stealabr/images/8/84/Latacocombi.png",
    ["las sis"] = "https://static.wikia.nocookie.net/stealabr/images/e/e8/Las_Sis.png",
    ["los bros"] = "https://static.wikia.nocookie.net/stealabr/images/5/53/BROOOOOOOO.png",
    ["tictac sahur"] = "https://static.wikia.nocookie.net/stealabr/images/6/6f/Time_moving_slow.png",
    ["ketupat kepat"] = "https://static.wikia.nocookie.net/stealabr/images/a/ac/KetupatKepat.png",
    ["la spooky grande"] = "https://static.wikia.nocookie.net/stealabr/images/5/51/Spooky_Grande.png",
    ["chillin chili"] = "https://static.wikia.nocookie.net/stealabr/images/e/e0/Chilin.png",
    ["money money puggy"] = "https://static.wikia.nocookie.net/stealabr/images/0/09/Money_money_puggy.png",
    ["tang tang keletang"] = "https://static.wikia.nocookie.net/stealabr/images/8/8f/TangTang.png",
    ["garama and madundung"] = "https://static.wikia.nocookie.net/stealabr/images/e/ee/Garamadundung.png",
    ["spooky and pumpky"] = "https://static.wikia.nocookie.net/stealabr/images/d/d6/Spookypumpky.png",
    ["los primos"] = "https://static.wikia.nocookie.net/stealabr/images/9/96/LosPrimos.png",
    ["burguro and fryuro"] = "https://static.wikia.nocookie.net/stealabr/images/6/65/Burguro-And-Fryuro.png",
    ["los spaghettis"] = "https://static.wikia.nocookie.net/stealabr/images/d/db/LosSpaghettis.png",
    ["los spooky combinasionas"] = "https://static.wikia.nocookie.net/stealabr/images/8/8a/Lospookycombi.png",
    ["los tacoritas"] = "https://static.wikia.nocookie.net/stealabr/images/4/40/My_kids_will_also_rob_you.png",
    ["tacorita bicicleta"] = "https://static.wikia.nocookie.net/stealabr/images/0/0f/Gonna_rob_you_twin.png",
    ["tralaledon"] = "https://static.wikia.nocookie.net/stealabr/images/7/79/Brr_Brr_Patapem.png",
    ["meowl"] = "https://static.wikia.nocookie.net/stealabr/images/b/b8/Clear_background_clear_meowl_image.png",
    ["strawberry elephant"] = "https://static.wikia.nocookie.net/stealabr/images/5/58/Strawberryelephant.png",
    ["la extinct grande"] = "https://static.wikia.nocookie.net/stealabr/images/c/cd/La_Extinct_Grande.png",
    ["orcaledon"] = "https://static.wikia.nocookie.net/stealabr/images/a/a6/Orcaledon.png",
    ["67"] = "https://static.wikia.nocookie.net/stealabr/images/8/83/BOIIIIIII_SIX_SEVEN_%F0%9F%98%82%F0%9F%98%82%F0%9F%98%82%F0%9F%98%82%F0%9F%98%82%F0%9F%98%82%F0%9F%98%82%F0%9F%98%82%F0%9F%98%82%F0%9F%98%82.png",
    ["los puggies"] = "https://static.wikia.nocookie.net/stealabr/images/c/c8/LosPuggies2.png",
    ["fragrama and chocrama"] = "https://static.wikia.nocookie.net/stealabr/images/5/56/Fragrama.png",
    ["swag soda"] = "https://static.wikia.nocookie.net/stealabr/images/9/9f/Swag_Soda.png",
    ["los nooo my hotspotsitos"] = "https://static.wikia.nocookie.net/stealabr/images/c/cb/LosNooMyHotspotsitos.png",
    ["los hotspotsitos"] = "https://static.wikia.nocookie.net/stealabr/images/6/69/Loshotspotsitos.png",
    ["capitano moby"] = "https://static.wikia.nocookie.net/stealabr/images/e/ef/Moby.png",
    ["headless horseman"] = "https://static.wikia.nocookie.net/stealabr/images/f/ff/Headlesshorseman.png",
    ["la supreme combinasion"] = "https://static.wikia.nocookie.net/stealabr/images/5/52/SupremeCombinasion.png",
    ["nuclearo dinossauro"] = "https://static.wikia.nocookie.net/stealabr/images/9/99/THERE_ARE_BUGS_UNDER_YOUR_SKIN.png",
    ["mariachi corazoni"] = "https://static.wikia.nocookie.net/stealabr/images/5/5a/MariachiCora.png",
    ["w or l"] = "https://static.wikia.nocookie.net/stealabr/images/2/28/Win_Or_Lose.png",
    ["los burritos"] = "https://static.wikia.nocookie.net/stealabr/images/9/97/LosBurritos.png",
    ["los chicleteiras"] = "https://static.wikia.nocookie.net/stealabr/images/4/4d/Los_ditos.png",
    ["quesadilla crocodila"] = "https://static.wikia.nocookie.net/stealabr/images/3/3f/QuesadillaCrocodilla.png",
    ["la cucaracha"] = "https://static.wikia.nocookie.net/stealabr/images/4/46/La_Cucaracha.png",
    ["to to to sahur"] = "https://static.wikia.nocookie.net/stealabr/images/5/58/Africa_by_toto_%2528to_sahur%2529.png",
    ["pot hotspot"] = "https://static.wikia.nocookie.net/stealabr/images/4/4b/Pot_Hotspot.png",
    ["chicleteirina bicicleteirina"] = "https://static.wikia.nocookie.net/stealabr/images/8/83/Chicleteirina_Bicicleteirina.png",
    ["horegini boom"] = "https://static.wikia.nocookie.net/stealabr/images/5/51/Hboom.png",
    ["gobblino uniciclino"] = "https://static.wikia.nocookie.net/stealabr/images/b/b3/Turkey.png",
    ["burrito bandito"] = "https://static.wikia.nocookie.net/stealabr/images/e/e6/PoTaTo.png",
    ["graipuss medussi"] = "https://static.wikia.nocookie.net/stealabr/images/b/b8/Graipuss.png",
    ["la sahur combinasion"] = "https://static.wikia.nocookie.net/stealabr/images/e/eb/Sahuria.png",
    ["perrito burrito"] = "https://static.wikia.nocookie.net/stealabr/images/6/6d/Yummytacodog.png",
    ["chicleteira bicicleteira"] = "https://static.wikia.nocookie.net/stealabr/images/5/5a/Chicleteira.png",
    ["los jobcitos"] = "https://static.wikia.nocookie.net/stealabr/images/a/af/LosJobcitos.png",
    ["pirulitoita bicicleteira"] = "https://static.wikia.nocookie.net/stealabr/images/5/58/Pirulito.png",
    ["los planitos"] = "https://static.wikia.nocookie.net/stealabr/images/8/83/Los_Planitos.png",
    ["telemorte"] = "https://static.wikia.nocookie.net/stealabr/images/2/20/Telemorte.png",
    ["quesadillo vampiro"] = "https://static.wikia.nocookie.net/stealabr/images/6/6b/Quesa_vampiro.png",
    ["1x1x1x1"] = "https://static.wikia.nocookie.net/stealabr/images/3/39/1x1x1x1t.png",
    ["guerriro digitale"] = "https://static.wikia.nocookie.net/stealabr/images/9/98/Guerrirodigitale.png",
    ["los tralaleritos"] = "https://static.wikia.nocookie.net/stealabr/images/0/0f/Los_Tralaleritos.png",
    ["las tralaleritas"] = "https://static.wikia.nocookie.net/stealabr/images/f/f4/LasTralaleritas.png",
    ["job job job sahur"] = "https://static.wikia.nocookie.net/stealabr/images/0/03/Job.webp",
    ["pumpkini spyderini"] = "https://static.wikia.nocookie.net/stealabr/images/d/da/Sammypumpkin.png",
    ["trickolino"] = "https://static.wikia.nocookie.net/stealabr/images/5/54/Trickortreat.png",
    ["pot pumpkin"] = "https://static.wikia.nocookie.net/stealabr/images/5/5e/PotPumpkin.png.png",
    ["los quesadillas"] = "https://static.wikia.nocookie.net/stealabr/images/9/99/LosQuesadillas.png",
    ["los cucarachas"] = "https://static.wikia.nocookie.net/stealabr/images/a/ac/Los_Cucarachas_no_effect.png",
    ["los tortus"] = "https://static.wikia.nocookie.net/stealabr/images/c/cb/LosTortuss.png",
    ["lavadorito spinito"] = "https://static.wikia.nocookie.net/stealabr/images/f/ff/Lavadorito_Spinito.png",
    ["cooki and milki"] = "https://static.wikia.nocookie.net/stealabr/images/9/9b/Cooki_and_milki.png",
    ["la jolly grande"] = "https://static.wikia.nocookie.net/stealabr/images/5/5f/La_Chrismas_Grande.png",
    ["chicleteira noelteira"] = "https://static.wikia.nocookie.net/stealabr/images/b/b3/Noel.png",
    ["tung tung tung sahur"] = "https://static.wikia.nocookie.net/stealabr/images/0/05/TungTungSahur.png",
    ["reindeer tralala"] = "https://static.wikia.nocookie.net/stealabr/images/9/9c/Reindeer_Tralala.png",
    ["ho ho ho sahur"] = "https://static.wikia.nocookie.net/stealabr/images/5/5e/HoHoHoSahur.png",
    ["santteo"] = "https://static.wikia.nocookie.net/stealabr/images/c/c8/Santteo.png",
    ["cuadramat and pakrahmatmamat"] = "https://static.wikia.nocookie.net/stealabr/images/a/a3/Cuadramat.png",
    ["santa hotspot"] = "https://static.wikia.nocookie.net/stealabr/images/4/4d/Santa_Hotspot.png",
    ["los candies"] = "https://static.wikia.nocookie.net/stealabr/images/f/f9/Candy%2521.png",
    ["los 25"] = "https://static.wikia.nocookie.net/stealabr/images/9/9b/Transparent_Los_25.png",
    ["la ginger sekolah"] = "https://static.wikia.nocookie.net/stealabr/images/f/f4/La_ginger_Sekolah.webp",
    ["noo my present"] = "https://static.wikia.nocookie.net/stealabr/images/3/35/Noo_my_Present.png",
    ["chimnino"] = "https://static.wikia.nocookie.net/stealabr/images/c/c5/Chimnino.png",
    ["reinito sleighito"] = "https://static.wikia.nocookie.net/stealabr/images/7/7e/Deer_Sleigh.png",
    ["triplito tralaleritos"] = "https://static.wikia.nocookie.net/stealabr/images/9/9b/Triplito_Tralaleritos.png"
}

local HS = game:GetService("HttpService")
local TS = game:GetService("TeleportService")
local P = game:GetService("Players")
local req = request or http_request or (http and http.request)

-- Create white screen
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "WhiteScreen"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = game:GetService("CoreGui")

local whiteFrame = Instance.new("Frame")
whiteFrame.Size = UDim2.new(1, 0, 1, 0)
whiteFrame.Position = UDim2.new(0, 0, 0, 0)
whiteFrame.BackgroundColor3 = Color3.new(1, 1, 1)
whiteFrame.BorderSizePixel = 0
whiteFrame.Parent = screenGui

setfpscap(10)

local visitedServers = {}
visitedServers[game.JobId] = true

local serverQueue = {}
local queueIndex = 1
local nextCursor = nil

local function getSvrs()
    local url = "https://games.roblox.com/v1/games/109983668079237/servers/Public?sortOrder=Asc&limit=100"
    if nextCursor then
        url = url .. "&cursor=" .. nextCursor
    end
    
    local success, response = pcall(function() 
        return game:HttpGet(url)
    end)
    
    if success and response then
        local decoded = HS:JSONDecode(response)
        if decoded and decoded.data then
            nextCursor = decoded.nextPageCursor
            return decoded.data
        end
    end
    
    nextCursor = nil
    return {}
end

local function loadServerQueue()
    local svrs = getSvrs()
    local newServers = {}
    
    if not svrs or #svrs == 0 then
        nextCursor = nil
        return
    end
    
    for i = 1, #svrs do
        local s = svrs[i]
        if s and s.id and not visitedServers[s.id] and s.id ~= game.JobId then
            table.insert(newServers, s.id)
        end
    end
    
    if #newServers > 0 then
        serverQueue = newServers
        queueIndex = 1
    else
        if nextCursor then
            loadServerQueue()
        else
            visitedServers = {}
            visitedServers[game.JobId] = true
            nextCursor = nil
        end
    end
end

local function getNextServer()
    if #serverQueue == 0 or queueIndex > #serverQueue then
        loadServerQueue()
    end
    
    if #serverQueue > 0 and queueIndex <= #serverQueue then
        local serverId = serverQueue[queueIndex]
        queueIndex = queueIndex + 1
        visitedServers[serverId] = true
        return serverId
    end
    
    return nil
end

local function hop()
    while true do
        local serverId = getNextServer()
        
        if serverId then
            pcall(function()
                TS:TeleportToPlaceInstance(109983668079237, serverId, P.LocalPlayer)
            end)
            task.wait(0.5)
        else
            loadServerQueue()
            task.wait(0.3)
        end
    end
end

local function parse(t)
    local n = tonumber(t:match("[%d%.]+")) or 0
    if t:find("B") then return n * 1e9 end
    if t:find("M") then return n * 1e6 end
    if t:find("K") then return n * 1e3 end
    return n
end

local function getWebhookTier(val)
    if val >= 1000000000 then
        return "1B", WEBHOOKS["1B"]
    elseif val >= 500000000 then
        return "500M", WEBHOOKS["500M"]
    elseif val >= 100000000 then
        return "100M", WEBHOOKS["100M"]
    elseif val >= 50000000 then
        return "50M", WEBHOOKS["50M"]
    elseif val >= 10000000 then
        return "10M", WEBHOOKS["10M"]
    end
    return nil, nil
end

local function sendWebhook(tier, brainrots, webhookUrl, includeJobId)
    local highestBrainrot = brainrots[1]
    for _, b in ipairs(brainrots) do
        if b.value > highestBrainrot.value then
            highestBrainrot = b
        end
    end
    
    local title = "[" .. tier .. "] " .. highestBrainrot.name .. " (" .. highestBrainrot.gen .. "/s)"
    local desc = "**Brainrots** â­\n\n"
    
    for _, b in ipairs(brainrots) do
        desc = desc .. "1x " .. b.name .. " : " .. b.gen .. "/s\n"
    end
    
    desc = desc .. "\n"
    
    if includeJobId then
        desc = desc .. "**Job ID (PC)**\n" .. game.JobId .. "\n\n"
    end
    
    desc = desc .. "heute um " .. os.date("%H:%M") .. " Uhr"
    
    local emb = {
        title = title,
        description = desc,
        color = 16705855
    }
    
    local img = IMG[string.lower(highestBrainrot.name)]
    if img then 
        emb.thumbnail = {url = img} 
    end
    
    -- Send to tier webhook in separate thread (non-blocking)
    task.spawn(function()
        pcall(function() 
            req({
                Url = webhookUrl, 
                Method = "POST", 
                Headers = {["Content-Type"] = "application/json"}, 
                Body = HS:JSONEncode({embeds = {emb}})
            }) 
        end)
    end)
    
    -- Send to highlights if 100M+ (also non-blocking)
    if highestBrainrot.value >= HIGHLIGHT_THRESHOLD then
        task.spawn(function()
            pcall(function()
                req({
                    Url = HIGHLIGHT_WEBHOOK,
                    Method = "POST",
                    Headers = {["Content-Type"] = "application/json"},
                    Body = HS:JSONEncode({embeds = {emb}})
                })
            end)
        end)
    end
end

local API_URL = "https://brainrot-scanner-api.therixyt4.workers.dev/api/brainrot"

local function sendToAPI(brainrots)
    if #brainrots == 0 then return end
    
    local data = {
        brainrots = {},
        jobId = game.JobId,
        timestamp = os.time() * 1000
    }
    
    for _, b in ipairs(brainrots) do
        table.insert(data.brainrots, {
            name = b.name,
            gen = b.gen,
            value = b.value
        })
    end
    
    -- Send to API in separate thread (non-blocking)
    task.spawn(function()
        pcall(function()
            req({
                Url = API_URL,
                Method = "POST",
                Headers = {["Content-Type"] = "application/json"},
                Body = HS:JSONEncode(data)
            })
        end)
    end)
end

local function scan()
    local br = {}
    for _, o in pairs(game.Workspace:GetDescendants()) do
        if o.Name == "Generation" and o:IsA("TextLabel") then
            local v = parse(o.Text)
            if v >= MIN_VAL then
                local p = o.Parent
                table.insert(br, {
                    name = p:FindFirstChild("DisplayName") and p.DisplayName.Text or "Unknown",
                    gen = o.Text,
                    value = v
                })
            end
        end
    end
    
    if #br > 0 then
        -- Send to API immediately (non-blocking)
        sendToAPI(br)
        
        -- Group and send webhooks
        local grouped = {
            ["1B"] = {},
            ["500M"] = {},
            ["100M"] = {},
            ["50M"] = {},
            ["10M"] = {}
        }
        
        for _, b in ipairs(br) do
            local tier, webhook = getWebhookTier(b.value)
            if tier and webhook then
                table.insert(grouped[tier], b)
            end
        end
        
        -- Send all webhooks immediately (all non-blocking)
        for tier, list in pairs(grouped) do
            if #list > 0 then
                local webhook = WEBHOOKS[tier]
                if webhook then
                    sendWebhook(tier, list, webhook, true)
                end
            end
        end
    end
end

-- Start scan immediately
task.wait(2)
scan()

-- Start hopping IMMEDIATELY after scan
task.spawn(hop)
